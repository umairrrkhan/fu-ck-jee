import{onAuthStateChanged,getCurrentUser,signOutUser}from"./firebase-config.js";let authButtons=document.querySelector(".auth-buttons"),loginBtn=document.querySelector(".login-btn"),signupBtn=document.querySelector(".signup-btn"),createProfileButton=e=>`
        <div class="user-profile-container">
            <a href="profile.html" class="nav-button profile-btn">
                <i class="fas fa-user-circle"></i>
                ${e.displayName||"Profile"}
            </a>
            <button class="nav-button logout-btn" onclick="handleLogout()">
                <i class="fas fa-sign-out-alt"></i>
                Logout
            </button>
        </div>
    `;async function handleLogout(){try{var e=await signOutUser();e.success?window.location.href="index.html":console.error("Logout failed:",e.error)}catch(e){console.error("Logout error:",e)}}function updateAuthUI(e){authButtons.innerHTML=e?createProfileButton(e):`
            <a href="auth.html#login" class="nav-button login-btn">Login</a>
            <a href="auth.html#signup" class="nav-button signup-btn">Sign up</a>
        `}function updateNavbarUI(e){var t=document.querySelector("header .login-btn"),n=document.querySelector("header .signup-btn"),o=document.getElementById("logout-btn"),a=document.getElementById("questions-link"),r=document.querySelector(".profile-container"),e=!!e;t&&(t.style.display=e?"none":"inline-block"),n&&(n.style.display=e?"none":"inline-block"),o&&(o.style.display=e?"inline-block":"none",e)&&!r&&(t=o.parentElement,(n=document.createElement("div")).className="profile-container",n.style.display="inline-block",n.style.marginRight="1rem",(r=document.createElement("a")).href="profile.html",r.className="profile-link",r.innerHTML=`
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                `,n.appendChild(r),t.insertBefore(n,o)),a&&(a.style.display=e?"inline-block":"none")}function openTab(e,t,n=!1){e&&e.preventDefault&&e.currentTarget&&"A"!==e.currentTarget.tagName||"A"===e?.currentTarget?.tagName&&e.currentTarget.getAttribute("href").startsWith("#");var o=document.getElementsByClassName("tab-content");for(let e=0;e<o.length;e++)o[e]&&(o[e].style.display="none",o[e].classList.remove("active"));var a=document.getElementsByClassName("tab-link");for(let e=0;e<a.length;e++)a[e]&&a[e].classList.remove("active");e=document.getElementById(t);if(e){e.style.display="block",e.classList.add("active");e=document.querySelector(`.tab-link[href="#${t}"]`);if(e&&e.classList.add("active"),n){e="#"+t;if(window.location.hash!==e)try{history.pushState(null,"",e)}catch(e){console.warn("[Tabs] Could not push state for hash update:",e)}}"function"==typeof updateAuthHeaderButtons&&updateAuthHeaderButtons(t)}else console.error("[Tabs] Tab content element not found for ID:",t)}function updateAuthHeaderButtons(e){var t,n;document.body.querySelector(".auth-page-container")&&(t=document.getElementById("auth-nav-login"),n=document.getElementById("auth-nav-signup"),t&&n?"login"===e?(t.style.display="none",n.style.display="inline-block"):"signup"===e?(t.style.display="inline-block",n.style.display="none"):(t.style.display="inline-block",n.style.display="inline-block",console.warn("[UI Update] Unexpected activeTab value in updateAuthHeaderButtons:",e)):console.warn("[UI Update] Auth page header nav buttons not found."))}onAuthStateChanged(e=>{updateAuthUI(e)}),window.handleLogout=handleLogout,document.addEventListener("DOMContentLoaded",()=>{let n=document.getElementById("site-header"),o=0;if(n){if(0<(o=n.offsetHeight))try{document.body.style.paddingTop=o+"px"}catch(e){console.error("[Sticky Header] Error setting initial body padding:",e)}else console.warn("[Sticky Header] Initial header height is 0. Padding top not set.");let e;window.addEventListener("scroll",function(){e&&window.cancelAnimationFrame(e),e=window.requestAnimationFrame(()=>{if(n)try{10<window.scrollY?n.classList.contains("sticky")||n.classList.add("sticky"):n.classList.contains("sticky")&&(n.classList.remove("sticky"),0<o)&&(document.body.style.paddingTop=o+"px")}catch(e){console.error("[Sticky Header] Error in scroll handler:",e)}})});let t;window.addEventListener("resize",function(){clearTimeout(t),t=setTimeout(()=>{n&&!n.classList.contains("sticky")&&0<(o=n.offsetHeight)&&(document.body.style.paddingTop=o+"px")},150)})}else var t=document.getElementById("status-badge-date");if(t)try{var a=(new Date).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"});t.textContent="Didn't get banned as of "+a}catch(e){console.error("[UI Update] Error formatting or setting status badge date:",e),t.textContent="Didn't get banned as of [Date Error]"}if(document.body.querySelector(".auth-page-container")){a=window.location.hash;let e="#signup"===a?"signup":"login";"login"!==e&&"signup"!==e||(r&&s&&r.addEventListener("submit",e=>{e.preventDefault(),s.style.display="block",s.classList.remove("success","error");var e=document.getElementById("contactName")?.value,t=document.getElementById("contactEmail")?.value,n=document.getElementById("contactMessage")?.value;e&&t&&n?(s.classList.add("success"),s.textContent="Thank you! Your message has been sent (Demo).",r.reset()):(s.classList.add("error"),s.textContent="Please fill in all required fields."),setTimeout(()=>{s.style.display="none"},6e3)}),var e=document.querySelector(".questions-table tbody");if(n&&o&&a&&e){let t=Array.from(e.querySelectorAll("tr"));function r(){let s=n.value.toLowerCase(),i=o.value.toLowerCase(),l=a.value.toLowerCase(),c=(var e;t.forEach(e=>{var t=e.children[1].textContent.toLowerCase(),n=e.children[2].textContent.toLowerCase(),o=e.children[3].textContent.toLowerCase(),t=""===s||t.includes(s),a=""===i||n===i,r=""===l||o===l,n=(e.style.display=n?"":"none",n&&c++}),let header=document.querySelector(".site-header"),scrollThreshold=30,lastScroll=0,scrollTimer=null,brandLogo=document.querySelector(".brand-logo");function handleScroll(){var e=window.scrollY;e>scrollThreshold?(header.classList.add("scrolled"),document.body.classList.add("header-scrolled")):(header.classList.remove("scrolled"),document.body.classList.remove("header-scrolled")),e>lastScroll&&e>2*scrollThreshold?header.classList.add("scroll-down"):header.classList.remove("scroll-down"),lastScroll=e,null!==scrollTimer&&clearTimeout(scrollTimer),scrollTimer=setTimeout(()=>{header.classList.remove("scroll-down")},150)}brandLogo&&setInterval(()=>{brandLogo.classList.add("pulse-glow"),setTimeout(()=>{brandLogo.classList.remove("pulse-glow")},1e3)},5e3),window.addEventListener("scroll",handleScroll,{passive:!0}),handleScroll(),window.addEventListener("resize",handleScroll,{passive:!0});import{initializeApp}from"https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";import{getAuth,signInWithPopup,GoogleAuthProvider,signInWithEmailAndPassword,createUserWithEmailAndPassword,signOut,onAuthStateChanged as firebaseOnAuthStateChanged}from"https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";let firebaseConfig={apiKey:"AIzaSyDy230uiSkjWuRdCmn1_0S-JyNmNg-XaMo",authDomain:"awesome-9ddc4.firebaseapp.com",projectId:"awesome-9ddc4",storageBucket:"awesome-9ddc4.firebasestorage.app",messagingSenderId:"1057550111061",appId:"1:1057550111061:web:abd6f3ce8dff701a419fdc",measurementId:"G-ZV7MZNHSEG"},app=initializeApp(firebaseConfig),auth=getAuth(app),googleProvider=new GoogleAuthProvider,handleAuthResponse=e=>e?{success:!0,user:e}:{success:!1,error:"Authentication failed"},signInWithGoogle=async()=>{try{var e;if(auth&&googleProvider)return e=await signInWithPopup(auth,googleProvider),handleAuthResponse(e.user);throw new Error("Firebase not initialized")}catch(e){return console.error("Google Sign-In Error:",e),{success:!1,error:"auth/popup-closed-by-user"===e.code?"Sign-in cancelled":"Failed to sign in with Google"}}},signInWithEmail=async(e,t)=>{try{if(!auth)throw new Error("Firebase not initialized");var n;if(e&&t)return n=await signInWithEmailAndPassword(auth,e,t),handleAuthResponse(n.user);throw new Error("Email and password required")}catch(e){return console.error("Email Sign-In Error:",e),{success:!1,error:e.message}}},signUpWithEmail=async(e,t)=>{try{if(!auth)throw new Error("Firebase not initialized");var n;if(e&&t)return n=await createUserWithEmailAndPassword(auth,e,t),handleAuthResponse(n.user);throw new Error("Email and password required")}catch(e){return console.error("Email Sign-Up Error:",e),"auth/email-already-in-use"===e.code?{success:!1,error:"This email address is already registered",code:e.code,existingAccount:!0}:{success:!1,error:e.message,code:e.code}}},signOutUser=async()=>{try{if(auth)return await signOut(auth),{success:!0};throw new Error("Firebase not initialized")}catch(e){return console.error("Sign Out Error:",e),{success:!1,error:e.message}}},onAuthStateChanged=e=>{if(auth)return firebaseOnAuthStateChanged(auth,e);console.error("Firebase not initialized")},getCurrentUser=()=>auth?auth.currentUser:null;export{signInWithGoogle,signInWithEmail,signUpWithEmail,signOutUser,onAuthStateChanged,getCurrentUser};